<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>paregorios.org (Posts about validation)</title><link>http://paregorios.org/</link><description></description><atom:link href="http://paregorios.org/categories/validation.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2018 &lt;a href="mailto:paregorios@hotmail.com"&gt;Tom Elliott&lt;/a&gt; </copyright><lastBuildDate>Fri, 06 Apr 2018 23:11:17 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Batch XML validation at the command line</title><link>http://paregorios.org/posts/2014/04/batch-xml-validation-at-command-line/</link><dc:creator>Tom Elliott</dc:creator><description>&lt;p&gt;Updated: 8 August, 2017 to reflect changes in the installation pattern for jing.&lt;br&gt;&lt;br&gt;Against a &lt;a href="http://relaxng.org/"&gt;RelaxNG&lt;/a&gt; schema. I had help figuring this out from &lt;a href="http://philomousos.com/"&gt;Hugh&lt;/a&gt; and &lt;a href="http://ryanfb.github.io/"&gt;Ryan&lt;/a&gt; at &lt;a href="http://blogs.library.duke.edu/dcthree/"&gt;DC3&lt;/a&gt;:&lt;br&gt;&lt;br&gt;&lt;/p&gt;&lt;blockquote class="tr_bq"&gt;&lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;$ find &lt;i&gt;{searchpath}&lt;/i&gt; -name "*.xml" -print | parallel --tag jing &lt;i&gt;{relaxngpath}&lt;/i&gt;&lt;/span&gt;&lt;/blockquote&gt;The &lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;find&lt;/span&gt; command hunts down all files ending with ".xml" in the directory tree under &lt;i&gt;searchpath&lt;/i&gt;. The &lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;parallel&lt;/span&gt; command takes that list of files and fires off (in parallel) a &lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;jing&lt;/span&gt; validation run for each of them. The &lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;--tag&lt;/span&gt; option passed to &lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;jing&lt;/span&gt; ensures we get the name of the file passed through with each error message. This turns out (in general terms as seen by me) to be much faster than running each &lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;jing&lt;/span&gt; call in sequence, e.g. with the &lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;--exec&lt;/span&gt; primary in &lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;find&lt;/span&gt;.&lt;br&gt;&lt;br&gt;As I'm running on a Mac, I had to install &lt;a href="http://www.gnu.org/software/parallel/"&gt;GNU Parallel&lt;/a&gt; and the &lt;a href="http://www.thaiopensource.com/relaxng/jing.html"&gt;Jing RelaxNG Validator&lt;/a&gt;. That's what &lt;a href="http://brew.sh/"&gt;Homebrew&lt;/a&gt; is for:&lt;br&gt;&lt;blockquote class="tr_bq"&gt;&lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;&lt;strike&gt;$ brew install jing&lt;/strike&gt;&lt;br&gt;$ brew install jing-trang&lt;br&gt;$ brew install parallel&lt;/span&gt;&lt;/blockquote&gt;NB: you may have to install a down version of Java before you can get the jing-trang formula to work in homebrew (e.g., &lt;span style="font-family: Courier New, Courier, monospace;"&gt;brew install java6&lt;/span&gt;).&lt;br&gt;&lt;br&gt;What's the context, you ask? I have lots of reasons to want to be able to do this. The proximal cause was batch-validating all the &lt;a href="http://epidoc.sf.net/"&gt;EpiDoc&lt;/a&gt; XML files for the inscriptions that are included in the &lt;a href="http://isaw.nyu.edu/publications/inscriptions/campa/"&gt;&lt;i&gt;Corpus of Campā Inscriptions&lt;/i&gt;&lt;/a&gt; before regenerating the site for an update today. I wanted to see quickly if there were any encoding errors in the XML that might blow up the XSL transforms we use to generate the site. So, what I actually ran was: &lt;br&gt;&lt;blockquote class="tr_bq"&gt;&lt;span style='font-family: "courier new" , "courier" , monospace;'&gt;$ curl -O http://www.stoa.org/epidoc/schema/latest/tei-epidoc.rng&lt;br&gt;$ find ./texts/xml -name '*.xml' -print | parallel --tag jing tei-epidoc.rng&lt;/span&gt;&lt;/blockquote&gt; Thanks to everybody who built all these tools!&lt;br&gt;&lt;br&gt;&lt;br&gt;</description><category>collaboration</category><category>efficiency</category><category>epidoc</category><category>horothesia</category><category>tei</category><category>tools</category><category>validation</category><category>xml</category><category>xslt</category><category>yaks</category><guid>http://paregorios.org/posts/2014/04/batch-xml-validation-at-command-line/</guid><pubDate>Fri, 11 Apr 2014 00:07:00 GMT</pubDate></item></channel></rss>