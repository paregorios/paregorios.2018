<html><body><p>So, I want to see how hard it is to query the <a href="http://www.w3.org/RDF/">RDF</a> that <a href="http://pelagios-project.blogspot.com/">PELAGIOS</a> partners are putting together. The first experiment is documented below.<br><br><b>Step 1: Set up a <a href="http://en.wikipedia.org/wiki/Triplestore">Triplestore</a> (something to load the RDF into and support queries)</b><br><br><i>Context: I'm a triplestore n00b. </i><br><br>I found Jeni Tennison's <a href="http://www.jenitennison.com/blog/node/152">Getting Started with RDF and SPARQL Using 4store and RDF.rb</a> and, though I had no interest in messing around with <a href="http://www.ruby-lang.org/en/">Ruby</a> as part of this exercise, the recommendation of <a href="http://4store.org/">4store</a> as a triplestore sounded good, so I went hunting for <a href="http://4store.org/download/macosx/">a Mac binary</a> and downloaded it.<br><br><b>Step 2: Grab RDF describing content in Nomisma.org</b><br><br><i>Context: I'm a point-and-click expert.</i><br><br>I downloaded the PELAGIOS-conformant RDF data published by Nomisma.org at <a href="http://nomisma.org/nomisma.org.pelagios.rdf">http://nomisma.org/nomisma.org.pelagios.rdf</a>.<br><br><i>Background: "<a href="http://nomisma.org/">Nomisma.org</a> is a collaborative effort to provide stable digital representations of numismatic concepts and entities, for example the generic idea of a coin hoard or an actual hoard as documented in the print publication An Inventory of Greek Coin Hoards (IGCH)."</i><br><br><b>Step 3: Fire up 4store and load in the nomisma.org </b><br><br><i>Context: I'm a 4store n00b, but I can cut and paste, read and reason, and experiment.</i><br><br>Double-clicked the 4store icon in my Applications folder. It opened a terminal window.<br><br>To create and start up an empty database for my triples, I followed <a href="http://4store.org/trac/wiki/CreateDatabase">the 4store instructions</a> and Tennison's post (mutatis mutandis) and so typed the following in the terminal window ("pelagios" is the name I gave to my database; you could call yours "ray" or "jay" if you like):<br></p><pre style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code>$ 4s-backend-setup pelagios<br>$ 4s-backend pelagios<br></code></pre>Then I started up <a href="http://4store.org/trac/wiki/SparqlServer">4store's SPARQL http server</a> and aimed it at the still-empty "pelagios" database so I could load my data and try my hand at some queries:<br><pre style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code>$ 4s-httpd pelagios<br></code></pre>Loading the nomisma data was then as simple as moving to the directory where I'd saved the RDF file and typing:<br><pre style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code>$ curl -T nomisma.org.pelagios.rdf 'http://localhost:8080/data/http://nomisma.org/nomisma.org.pelagios.rdf/'<br></code></pre>Note how the URI base for nomisma items is appended to the URL string passed via curl. This is how you specify the "model URI" for the graph of triples that gets created from the RDF.<br><br><b>Step 4: Try to construct a query and dig out some data.</b><br><br><i>Context: I'm a SPARQL n00b, but I'd done some SQL back in the day and XML and namespaces are pretty much burned into my soul at this point. </i><br><br>Following Tennison's example, I pointed my browser at http://localhost:8080/test/. I got 4store's SPARQL test query interface. I googled around looking grumpily at different SPARQL "how-tos" and "getting starteds" and trying stuff and pondering repeated failure until this worked:<br><pre style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code><br>PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;<br>PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;<br>PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;<br>PREFIX oac: &lt;http://www.openannotation.org/ns/&gt;<br><br>SELECT ?x<br>WHERE {<br> ?x oac:hasBody &lt;http://pleiades.stoa.org/places/462086&gt; .<br>} <br><br></code></pre>That's "find the ID of every OAC Annotation in the triplestore that's linked to Pleiades Place 462086" (i.e., <a href="http://pleiades.stoa.org/places/462086">Akragas/Agrigentum, modern Agrigento in Sicily</a>). It's a list like this: <br><ul><li>http://nomisma.org/nomisma.org.pelagios.rdf#igch1910-agrigentum-5</li><li>http://nomisma.org/nomisma.org.pelagios.rdf#igch2089-agrigentum-24</li><li>http://nomisma.org/nomisma.org.pelagios.rdf#igch2101-agrigentum-32</li><li>...</li></ul><div>51 IDs in all.</div><div><br></div><div>But what I really want is a list of the IDs of the nomisma entities themselves so I can go look up the details and learn things. Back to the SPARQL mines until I produced this:</div><div><pre style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code>PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;<br>PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;<br>PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;<br>PREFIX oac: &lt;http://www.openannotation.org/ns/&gt;<br><br>SELECT ?nomismaid<br>WHERE {<br> ?x oac:hasBody &lt;http://pleiades.stoa.org/places/462086&gt; .<br> ?x oac:hasTarget ?nomismaid .<br>} <br><br></code></pre></div><div></div><div>Now I have a list of 51 nomisma IDs: <a href="http://nomisma.org/id/agrigentum">one for the mint</a> and 50 coin hoards that illustrate the economic network in which the ancient city participated (e.g., <a href="http://nomisma.org/id/igch2081">http://nomisma.org/id/igch2081</a>).<br><br>Cost: about 2 hours of time, 1 cup of coffee, and three favors from <a href="http://sebastianheath.com/">Sebastian Heath</a> on IRC.<br><br>Up next: <a href="http://arachne.uni-koeln.de/">Arachne</a>, the object database of the <i>Deutsches Archäologisches Institut</i>.<br><br></div><div><br></div><div><br></div></body></html>