<html><body><i>Latest in a <a href="http://horothesia.blogspot.com/search/label/pelagiosplay">Playing with PELAGIOS series</a></i><br><br>Some of the PELAGIOS partners distribute their annotation RDF in a relatively small number of files. Others (like SPQR and ANS) have a very large number of files. This makes <a href="http://horothesia.blogspot.com/2012/02/playing-with-pelagios-nomisma.html">the technique I used earlier</a> for adding triples to the database ungainly. Fortunately,<a href="http://4store.org/trac/wiki/ImportData"> 4store provides some command line methods for loading triples</a>.<br><br>First, stop the 4store http server (<a href="http://4store.org/trac/wiki/SparqlServer#ShuttingDown">why?</a>):<br><pre style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code>$ killall 4s-httpd<br></code></pre>Try to import all the RDF files. Â Rats!<br><pre style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code>$ 4s-import -a pelagios *.rdf<br>-bash: /Applications/4store.app/Contents/MacOS/bin/4s-import: Argument list too long<br></code></pre><a href="http://www.gnu.org/software/bash/">Bash</a> to the rescue (but note that doing <a href="http://4store.org/trac/wiki/ImportData#Multiplefiles">one file at a time has a cost</a> on the 4store side):<br><pre style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code>$ for f in *.rdf; do 4s-import -av pelagios $f; done<br>Reading &lt;file:///Users/paregorios/Documents/files/P/pelagios-data/coins/0000.999.00000.rdf&gt;<br>Pass 1, processed 10 triples (10)<br>Pass 2, processed 10 triples, 8912 triples/s<br>Updating index<br>Index update took 0.000890 seconds<br>Imported 10 triples, average 4266 triples/s<br>Reading &lt;file:///Users/paregorios/Documents/files/P/pelagios-data/coins/0000.999.101.rdf&gt;<br>Pass 1, processed 11 triples (11)<br>Pass 2, processed 11 triples, 9856 triples/s<br>Updating index<br>Index update took 0.000936 seconds<br>Imported 11 triples, average 4493 triples/s<br>Reading &lt;file:///Users/paregorios/Documents/files/P/pelagios-data/coins/0000.999.10176.rdf&gt;<br>Pass 1, processed 8 triples (8)<br>Pass 2, processed 8 triples, 6600 triples/s<br>Updating index<br>Index update took 0.000892 seconds<br>Imported 8 triples, average 3256 triples/s<br>... <br></code></pre>This took a while. There are 86,200 files in the ANS annotation batch.<br><br>Note the use of the -a option on 4s-import to ensure the triples are added to the current contents of the database, rather than replacing them! Note also the -v option, which is what gives you the report (otherwise, it's silent and that makes my ctrl-c finger twitchy).<br><br>Now, back to the SPARQL mines.</body></html>