<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Batch XML validation at the command line | paregorios.org</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../rss.xml">
<link rel="canonical" href="http://paregorios.org/posts/2014/04/batch-xml-validation-at-command-line/">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Tom Elliott">
<link rel="prev" href="../../03/new-in-maia-and-electra-maxim-romanov/" title="New in Maia and Electra: Maxim Romanov" type="text/html">
<link rel="next" href="../mining-awol-for-identifiers/" title="Mining AWOL for Identifiers" type="text/html">
<meta property="og:site_name" content="paregorios.org">
<meta property="og:title" content="Batch XML validation at the command line">
<meta property="og:url" content="http://paregorios.org/posts/2014/04/batch-xml-validation-at-command-line/">
<meta property="og:description" content='Updated: 8 August, 2017 to reflect changes in the installation pattern for jing.Against a RelaxNG schema. I had help figuring this out from Hugh and Ryan at DC3:$ find {searchpath} -name "*.xml" -prin'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-04-10T19:07:00-05:00">
<meta property="article:tag" content="collaboration">
<meta property="article:tag" content="efficiency">
<meta property="article:tag" content="epidoc">
<meta property="article:tag" content="horothesia">
<meta property="article:tag" content="tei">
<meta property="article:tag" content="tools">
<meta property="article:tag" content="validation">
<meta property="article:tag" content="xml">
<meta property="article:tag" content="xslt">
<meta property="article:tag" content="yaks">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://paregorios.org/">

                <span id="blog-title">paregorios.org</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../../../about/">About</a>
                </li>
<li>
<a href="../../../../archive.html">Archive</a>
                </li>
<li>
<a href="../../../../categories/">Tags</a>
                </li>
<li>
<a href="../../../../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.src.html" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Batch XML validation at the command line</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    Tom Elliott
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2014-04-10T19:07:00-05:00" itemprop="datePublished" title="2014-04-10 19:07">2014-04-10 19:07</time></a></p>
            
        <p class="sourceline"><a href="index.src.html" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Updated: 8 August, 2017 to reflect changes in the installation pattern for jing.<br><br>Against a <a href="http://relaxng.org/">RelaxNG</a> schema. I had help figuring this out from <a href="http://philomousos.com/">Hugh</a> and <a href="http://ryanfb.github.io/">Ryan</a> at <a href="http://blogs.library.duke.edu/dcthree/">DC3</a>:<br><br></p>
<blockquote class="tr_bq"><span style='font-family: "courier new" , "courier" , monospace;'>$ find <i>{searchpath}</i> -name "*.xml" -print | parallel --tag jing <i>{relaxngpath}</i></span></blockquote>The <span style='font-family: "courier new" , "courier" , monospace;'>find</span> command hunts down all files ending with ".xml" in the directory tree under <i>searchpath</i>. The <span style='font-family: "courier new" , "courier" , monospace;'>parallel</span> command takes that list of files and fires off (in parallel) a <span style='font-family: "courier new" , "courier" , monospace;'>jing</span> validation run for each of them. The <span style='font-family: "courier new" , "courier" , monospace;'>--tag</span> option passed to <span style='font-family: "courier new" , "courier" , monospace;'>jing</span> ensures we get the name of the file passed through with each error message. This turns out (in general terms as seen by me) to be much faster than running each <span style='font-family: "courier new" , "courier" , monospace;'>jing</span> call in sequence, e.g. with the <span style='font-family: "courier new" , "courier" , monospace;'>--exec</span> primary in <span style='font-family: "courier new" , "courier" , monospace;'>find</span>.<br><br>As I'm running on a Mac, I had to install <a href="http://www.gnu.org/software/parallel/">GNU Parallel</a> and the <a href="http://www.thaiopensource.com/relaxng/jing.html">Jing RelaxNG Validator</a>. That's what <a href="http://brew.sh/">Homebrew</a> is for:<br><blockquote class="tr_bq"><span style='font-family: "courier new" , "courier" , monospace;'><strike>$ brew install jing</strike><br>$ brew install jing-trang<br>$ brew install parallel</span></blockquote>NB: you may have to install a down version of Java before you can get the jing-trang formula to work in homebrew (e.g., <span style="font-family: Courier New, Courier, monospace;">brew install java6</span>).<br><br>What's the context, you ask? I have lots of reasons to want to be able to do this. The proximal cause was batch-validating all the <a href="http://epidoc.sf.net/">EpiDoc</a> XML files for the inscriptions that are included in the <a href="http://isaw.nyu.edu/publications/inscriptions/campa/"><i>Corpus of Campā Inscriptions</i></a> before regenerating the site for an update today. I wanted to see quickly if there were any encoding errors in the XML that might blow up the XSL transforms we use to generate the site. So, what I actually ran was: <br><blockquote class="tr_bq"><span style='font-family: "courier new" , "courier" , monospace;'>$ curl -O http://www.stoa.org/epidoc/schema/latest/tei-epidoc.rng<br>$ find ./texts/xml -name '*.xml' -print | parallel --tag jing tei-epidoc.rng</span></blockquote> Thanks to everybody who built all these tools!<br><br><br>
</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../categories/collaboration/" rel="tag">collaboration</a></li>
            <li><a class="tag p-category" href="../../../../categories/efficiency/" rel="tag">efficiency</a></li>
            <li><a class="tag p-category" href="../../../../categories/epidoc/" rel="tag">epidoc</a></li>
            <li><a class="tag p-category" href="../../../../categories/horothesia/" rel="tag">horothesia</a></li>
            <li><a class="tag p-category" href="../../../../categories/tei/" rel="tag">tei</a></li>
            <li><a class="tag p-category" href="../../../../categories/tools/" rel="tag">tools</a></li>
            <li><a class="tag p-category" href="../../../../categories/validation/" rel="tag">validation</a></li>
            <li><a class="tag p-category" href="../../../../categories/xml/" rel="tag">xml</a></li>
            <li><a class="tag p-category" href="../../../../categories/xslt/" rel="tag">xslt</a></li>
            <li><a class="tag p-category" href="../../../../categories/yaks/" rel="tag">yaks</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../03/new-in-maia-and-electra-maxim-romanov/" rel="prev" title="New in Maia and Electra: Maxim Romanov">Previous post</a>
            </li>
            <li class="next">
                <a href="../mining-awol-for-identifiers/" rel="next" title="Mining AWOL for Identifiers">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2018         <a href="mailto:paregorios@hotmail.com">Tom Elliott</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../../../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
